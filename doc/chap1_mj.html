<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<title>GAP (ProgressBar) - Chapter 1: Introduction</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="generator" content="GAPDoc2HTML" />
<link rel="stylesheet" type="text/css" href="manual.css" />
<script src="manual.js" type="text/javascript"></script>
<script type="text/javascript">overwriteStyle();</script>
</head>
<body class="chap1"  onload="jscontent()">
<link rel="stylesheet" type="text/css" href="style/style.css" />


<div class="chlinktop"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chap3_mj.html">3</a>  <a href="chap4_mj.html">4</a>  <a href="chap5_mj.html">5</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<div class="chlinkprevnexttop">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap0_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap2_mj.html">[Next Chapter]</a>&nbsp;  </div>

<p id="mathjaxlink" class="pcenter"><a href="chap1.html">[MathJax off]</a></p>
<p><a id="X7DFB63A97E67C0A1" name="X7DFB63A97E67C0A1"></a></p>
<div class="ChapSects"><a href="chap1_mj.html#X7DFB63A97E67C0A1">1 <span class="Heading">Introduction</span></a>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X846D2BD67F36D59E">1.1 <span class="Heading">Example: Loop</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X87F8FAF58100074E">1.2 <span class="Heading">Example: Indefinite Loop</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X7916A72882411777">1.3 <span class="Heading">Example: Printing Values</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X81C214217B9F1F7C">1.4 <span class="Heading">Example: Nested Loop</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X850B3FE57E169EC9">1.5 <span class="Heading">Example: Tree</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X7BE735ED834BB409">1.6 <span class="Heading">Example: Table</span></a>
</span>
</div>
<div class="ContSect"><span class="tocline"><span class="nocss">&nbsp;</span><a href="chap1_mj.html#X846A1C0786CBA54F">1.7 <span class="Heading">Example: Stopping</span></a>
</span>
</div>
</div>

<h3>1 <span class="Heading">Introduction</span></h3>

<p>This chapter serves as an introduction to the package <strong class="pkg">ProgressBar</strong> and includes many examples.</p>

<p>The main purpose of this package is to display the progression of a process in the terminal via a progress bar that refreshes in the screen after each step of the process.</p>

<p>Instead of writing new lines in the terminal screen after each step of a process, the terminal screen gets refreshed in space. This method of displaying information avoids spamming in the terminal, and provides an intuitive and clean visualization of the progress.</p>

<p><a id="X846D2BD67F36D59E" name="X846D2BD67F36D59E"></a></p>

<h4>1.1 <span class="Heading">Example: Loop</span></h4>

<p>In the first example we show the simplest use case of the package, namely displaying the progression of a loop over a fixed list.</p>

<p>For this we simply wrap the list into the function <code class="code">ProcessIterator</code>.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop(7, 10^6/4);;</span>
</pre></div>

<p>In the above example we might encounter the following outputs during the execution of the iteration. All these outputs are visible in the same lines of the terminal for roughly 1/4 of a second.</p>


<div class="example"><pre>
| Total Time ~ 00:00:00
[========================================-------------------------------] | 4/7

| Total Time ~ 00:00:01
[=======================================================================] | 7/7
</pre></div>

<p>The package can also handle very fast updates, but keep in mind that it adds some overhead to the computation. In this example, the overhead acumulates over the <span class="SimpleMath">\(5000\)</span> iterations to <span class="SimpleMath">\(2\)</span> extra seconds for a computation that would otherwise only take about <span class="SimpleMath">\(5\)</span> seconds.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop(5000, 1000);</span>
</pre></div>

<p><a id="X87F8FAF58100074E" name="X87F8FAF58100074E"></a></p>

<h4>1.2 <span class="Heading">Example: Indefinite Loop</span></h4>

<p>We can also display the progression of an indefinite loop.</p>

<p>For this we simply wrap an iterator into the function <code class="code">ProcessIterator</code>.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator(IteratorOfCombinations([1 .. n])) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop(8, 10^4);;</span>
</pre></div>

<p>In the above example we might encounter the following outputs during the execution of the iteration.</p>


<div class="example"><pre>
| Total Time ~ 00:00:01
[--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--=] | 123/oo

| Total Time ~ 00:00:02
[==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==--==-] | 193/oo

| Total Time ~ 00:00:03
[===================================================================] | 256/oo
</pre></div>

<p>Sometimes we can actually compute the number of steps needed for the process to terminate beforehand. This will change the display and provide more detailed information about the progress, see <a href="chap1_mj.html#X846D2BD67F36D59E"><span class="RefLink">1.1</span></a>.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local iter, i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     iter := ProcessIterator(rec(</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       iter := IteratorOfCombinations([1 .. n]),</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       totalSteps := 2^n</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     ));</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in iter do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop(8, 10^4);;</span>
</pre></div>

<p>If we set the <code class="code">totalSteps</code> wrong, the display will change to an indefinite loop once we exceed them in the iteration.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local iter, i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     iter := ProcessIterator(rec(</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       iter := IteratorOfCombinations([1 .. n]),</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       totalSteps := 2^(n-1)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     ));</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in iter do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoop(8, 10^4);;</span>
</pre></div>

<p><a id="X7916A72882411777" name="X7916A72882411777"></a></p>

<h4>1.3 <span class="Heading">Example: Printing Values</span></h4>

<p>If we want to print the value of the current iteration, this can be done via an optional content record.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoopWithValue := function(n, nSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i, j;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n], rec(</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         title := JoinStringsWithSeparator([</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">           "---------------",</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">           "Main iteration:",</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">           "  j = {{value + 100}}",</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         ], "\n"))) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       j := i + 100;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoopWithValue(35, 10^6/10);;</span>
</pre></div>

<p><a id="X81C214217B9F1F7C" name="X81C214217B9F1F7C"></a></p>

<h4>1.4 <span class="Heading">Example: Nested Loop</span></h4>

<p>The package also supports displaying nested loops.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doNestedLoop := function(n, nSleep, m, mSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i, j;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       for j in ProcessIterator([1 .. m]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         MicroSleep(mSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doNestedLoop(3, 10^6/2, 50, 10^4);;</span>
</pre></div>

<p>An example output might look like this</p>


<div class="example"><pre>
| Total Time ~ 00:00:01
[==============================================-----------------------] |  2/ 3
   [------------------------------------------------------------------] |  0/50

| Total Time ~ 00:00:02
[==============================================-----------------------] |  2/ 3
   [===============================================-------------------] | 36/50

| Total Time ~ 00:00:02
[=====================================================================] |  3/ 3
   [==================================================================] | 50/50
</pre></div>

<p><a id="X850B3FE57E169EC9" name="X850B3FE57E169EC9"></a></p>

<h4>1.5 <span class="Heading">Example: Tree</span></h4>

<p>We can also display much more intertwined processes than nested loops. This package can handle any process tree.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doTree := function(n, nSleep, l, lSleep, m, mSleep, r, rSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i, j, k;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       for j in ProcessIterator([1 .. l]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         MicroSleep(lSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         for k in ProcessIterator([1 .. m]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">           MicroSleep(mSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       for j in ProcessIterator([1 .. r]) do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         MicroSleep(rSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doTree(3, 10^6/10, 5, 10^6/2, 4, 10^6/10, 12, 10^6/10);;</span>
</pre></div>

<p>Example output during the execution of the function:</p>


<div class="example"><pre>
| Total Time ~ 00:00:15
[==============================================-----------------------] |  2/ 3
   [=======================================---------------------------] |  3/ 5
   |  [===============================--------------------------------] |  2/ 4
   [------------------------------------------------------------------] |  0/12
</pre></div>

<p>In the above example we create the processes on the fly, so for example the "Right" process appears in the terminal only after we create this process for the first time. When this happens, the layout of the display changes slightly, because the total number of iterations for "Right" has 2 digits, whereas for each of the ones before that it had 1 digit. Example output before process "Right" gets created for the first time:</p>


<div class="example"><pre>
| Total Time ~ 00:00:03
[-----------------------------------------------------------------------] | 0/3
   [======================================================--------------] | 4/5
      [-----------------------------------------------------------------] | 0/4
</pre></div>

<p>Example output after process "Right" gets created for the first time:</p>


<div class="example"><pre>
| Total Time ~ 00:00:11
[=======================----------------------------------------------] |  1/ 3
   [==================================================================] |  5/ 5
   |  [===============================================================] |  4/ 4
   [======================================----------------------------] |  7/12
</pre></div>

<p>If we want to see all processes from the beginning, we need to set the processes before the most outer loop starts.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doTree := function(n, nSleep, l, lSleep, m, mSleep, r, rSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local iter, i, j, k;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     iter := ProcessIterator([1 .. n], "Root", fail);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     SetProcess(l, "Left", "Root");</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     SetProcess(m, "Inner", "Left");</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     SetProcess(r, "Right", "Root");</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in iter do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       for j in ProcessIterator([1 .. l], "Left", "Root") do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         MicroSleep(lSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         for k in ProcessIterator([1 .. m], "Inner", "Left") do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">           MicroSleep(mSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       for j in ProcessIterator([1 .. r], "Right", "Root") do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">         MicroSleep(rSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doTree(3, 10^6/10, 5, 10^6/2, 4, 10^6/10, 12, 10^6/10);;</span>
</pre></div>

<p>Then the output looks like this from the start:</p>


<div class="example"><pre>
| Total Time ~ 00:00:03
[---------------------------------------------------------------------] |  0/ 3
   [=======================================---------------------------] |  3/ 5
   |  [---------------------------------------------------------------] |  0/ 4
   [------------------------------------------------------------------] |  0/12
</pre></div>

<p><a id="X7BE735ED834BB409" name="X7BE735ED834BB409"></a></p>

<h4>1.6 <span class="Heading">Example: Table</span></h4>

<p>If for example we want to compare the performance of different processes, it might be more intuitive to switch to the table layout.</p>

<p>For this we need to define a dummy process, that we terminate manually in the end. All processes we want to track have to be defined as children of this dummy.</p>

<p>TODO</p>

<p><a id="X846A1C0786CBA54F" name="X846A1C0786CBA54F"></a></p>

<h4>1.7 <span class="Heading">Example: Stopping</span></h4>

<p>If there is code that we do not want to track in our process, we can use <code class="code">StopProcess</code> and <code class="code">StartProcess</code>.</p>


<div class="example"><pre>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">LoadPackage("ProgressBar");;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoopWithStop := function(n, nSleep, mSleep)</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     local i;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     for i in ProcessIterator([1 .. n], "proc") do</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(nSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       StopProcess("proc");</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       MicroSleep(mSleep);</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">       StartProcess("proc");</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">     od;</span>
<span class="GAPprompt">&gt;</span> <span class="GAPinput">   end;;</span>
<span class="GAPprompt">gap&gt;</span> <span class="GAPinput">doLoopWithStop(50, 10^6/10, 10^6/10);;</span>
</pre></div>

<p>In the above example the code runs for roughly 10 seconds, but the tracked total time that contributes to the process shows roughly 5 seconds.</p>


<div class="chlinkprevnextbot">&nbsp;<a href="chap0_mj.html">[Top of Book]</a>&nbsp;  <a href="chap0_mj.html#contents">[Contents]</a>&nbsp;  &nbsp;<a href="chap0_mj.html">[Previous Chapter]</a>&nbsp;  &nbsp;<a href="chap2_mj.html">[Next Chapter]</a>&nbsp;  </div>


<div class="chlinkbot"><span class="chlink1">Goto Chapter: </span><a href="chap0_mj.html">Top</a>  <a href="chap1_mj.html">1</a>  <a href="chap2_mj.html">2</a>  <a href="chap3_mj.html">3</a>  <a href="chap4_mj.html">4</a>  <a href="chap5_mj.html">5</a>  <a href="chapInd_mj.html">Ind</a>  </div>

<hr />
<p class="foot">generated by <a href="http://www.math.rwth-aachen.de/~Frank.Luebeck/GAPDoc">GAPDoc2HTML</a></p>
</body>
</html>
